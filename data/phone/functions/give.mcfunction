give @s written_book{pages:[\
      '["",\
         {"text":"          "},\
         {"text":" Ãß_Ãß_Ãß","color":"#573715","clickEvent":{"action":"change_page","value":3}, "hoverEvent":{"action":"show_text","contents":"Contacts"}},\
         {"text":"\\n "},\
         {"text":"‚úÜTaxi","bold":false,"color":"gold","clickEvent":{"action":"change_page","value":4}, "hoverEvent":{"action":"show_text","contents":["Call ",{"text":"Hit & Run","italic"=true}," Taxis"]}},\
         {"text":"   "},\
         {"text":"«Å‚ò≥|‚ò≤«Å","bold":false,"color":"#573715","clickEvent":{"action":"change_page","value":3}, "hoverEvent":{"action":"show_text","contents":"Contacts"}},\
         {"text":"    "},\
         {"text":"‚òëŒû","bold":false,"color":"blue","clickEvent":{"action":"change_page","value":5}, "hoverEvent":{"action":"show_text","contents":"Objectives"}},\
         {"text":"\\n\\n  "},\
         {"text":"|‚öôüîß|","bold":true,"color":"dark_gray","clickEvent":{"action":"change_page","value":7}, "hoverEvent":{"action":"show_text","contents":"Settings"}},\
         {"text":"    "},\
         {"text":"«Å.‚åö.«Å","bold":false,"color":"black","clickEvent":{"action":"change_page","value":7}, "hoverEvent":{"action":"show_text","contents":"Clock"}},\
         {"text":"\\n\\n\\n\\n\\n\\n\\n\\n\\n "},\
         {"text":"‚ïî‚ïê‚ïó","color":"dark_green","clickEvent":{"action":"change_page","value":2}, "hoverEvent":{"action":"show_text","contents":"Phone"}},\
         {"text":"     "},\
         {"text":".__.","color":"blue","bold":true,"clickEvent":{"action":"change_page","value":7}, "hoverEvent":{"action":"show_text","contents":"Mail"}},\
         {"text":"      "},\
         {"text":"__","color":"red","clickEvent":{"action":"change_page","value":6}, "hoverEvent":{"action":"show_text","contents":"Music"}},\
         {"text":"\\n "},\
         {"text":".‚Äµ«Å‚ë®«Å’õ","color":"dark_green","clickEvent":{"action":"change_page","value":2}, "hoverEvent":{"action":"show_text","contents":"Phone"}},\
         {"text":"     "},\
         {"text":"|‚â•‚â§|","color":"blue","bold":true,"clickEvent":{"action":"change_page","value":7}, "hoverEvent":{"action":"show_text","contents":"Mail"}},\
         {"text":"      "},\
         {"text":"|‚ô´|","color":"red","clickEvent":{"action":"change_page","value":6}, "hoverEvent":{"action":"show_text","contents":"Music"}}\
      ]',\
      '["",\
         {"text":"√ó","bold":true,"clickEvent":{"action":"change_page","value":1},"hoverEvent":{"action":"show_text","contents":"Home Screen"}}," ",\
         {"text":"Phone:","bold":true,"underlined":true},\
         {"text":"\\n                          "},\
         {"text":"\\u2681","color":"green","clickEvent":{"action":"run_command","value":"/function dial:open_keypad"}},\
         {"text":"\\n\\n         "},\
         {"text":"1","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_1"}},\
         {"text":"   "},\
         {"text":"2","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_2"}},\
         {"text":"   "},\
         {"text":"3","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_3"}},\
         {"text":"\\n\\n         "},\
         {"text":"4","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_4"}},\
         {"text":"   "},\
         {"text":"5","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_5"}},\
         {"text":"   "},\
         {"text":"6","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_6"}},\
         {"text":"\\n\\n         "},\
         {"text":"7","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_7"}},\
         {"text":"   "},\
         {"text":"8","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_8"}},\
         {"text":"   "},\
         {"text":"9","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_9"}},\
         {"text":"\\n\\n\\u2006        "},\
         {"text":"*"},\
         {"text":"\\u2006  "},\
         {"text":"0","color":"dark_green","clickEvent":{"action":"run_command","value":"/function dial:click_0"}},\
         {"text":"   "},\
         {"text":"#"},\
         {"text":"\\n\\n\\u2006\\u2006\\u2006          "},\
         {"text":"[","color":"green","bold":true,"clickEvent":{"action":"run_command","value":"/function dial:dial"}},\
         {"text":"\\u2006  "},\
         {"text":"<","color":"red","bold":true,"clickEvent":{"action":"run_command","value":"/function dial:del_digit"}},\
         {"text":"\\n\\n"},\
         {"text":"            "},{"text":" ‚Éû","bold":true,"clickEvent":{"action":"change_page","value":1}, "hoverEvent":{"action":"show_text","contents":"Home Screen"}}\
      ]',\
      '["",\
         {"text":"√ó","bold":true,"clickEvent":{"action":"change_page","value":1},"hoverEvent":{"action":"show_text","contents":"Home Screen"}}," ",\
         {"text":"Contacts:","bold":true,"underlined":true},{"text":"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n"},\
         {"text":"            "},{"text":" ‚Éû","bold":true,"clickEvent":{"action":"change_page","value":1}, "hoverEvent":{"action":"show_text","contents":"Home Screen"}}\
      ]',\
      '["",\
         {"text":"√ó","bold":true,"clickEvent":{"action":"change_page","value":1},"hoverEvent":{"action":"show_text","contents":"Home Screen"}}," ",\
         {"text":"Hit & Run","bold":true,"underlined":true,"italic":true, "extra":[{"text":" Taxis","italic":false}]},\
         {"text":"\\n\\n"},\
         "  ",{"text":"Common dropoffs","bold":true,"underlined":true},{"text":"\\n\\n     ","color":"reset"},\
         {"text":"\\u2460","clickEvent":{"action":"run_command","value":"/tellraw @s {\\"text\\":\\"No location set\\",\\"color\\":\\"red\\"}"},"hoverEvent":{"action":"show_text","contents":{"text":"Unset","color":"red"}}},\
         {"text":"     "},\
         {"text":"\\u2461","clickEvent":{"action":"run_command","value":"/tellraw @s {\\"text\\":\\"No location set\\",\\"color\\":\\"red\\"}"},"hoverEvent":{"action":"show_text","contents":{"text":"Unset","color":"red"}}},\
         {"text":"     "},\
         {"text":"\\u2462","clickEvent":{"action":"run_command","value":"/tellraw @s {\\"text\\":\\"No location set\\",\\"color\\":\\"red\\"}"},"hoverEvent":{"action":"show_text","contents":{"text":"Unset","color":"red"}}},\
         {"text":"\\n\\n     "},\
         {"text":"\\u2463","clickEvent":{"action":"run_command","value":"/tellraw @s {\\"text\\":\\"No location set\\",\\"color\\":\\"red\\"}"},"hoverEvent":{"action":"show_text","contents":{"text":"Unset","color":"red"}}},\
         {"text":"     "},\
         {"text":"\\u2464","clickEvent":{"action":"run_command","value":"/tellraw @s {\\"text\\":\\"No location set\\",\\"color\\":\\"red\\"}"},"hoverEvent":{"action":"show_text","contents":{"text":"Unset","color":"red"}}},\
         {"text":"     "},\
         {"text":"\\u2465","clickEvent":{"action":"run_command","value":"/tellraw @s {\\"text\\":\\"No location set\\",\\"color\\":\\"red\\"}"},"hoverEvent":{"action":"show_text","contents":{"text":"Unset","color":"red"}}},\
         {"text":"\\n\\n     "},\
         {"text":"\\u2466","clickEvent":{"action":"run_command","value":"/tellraw @s {\\"text\\":\\"No location set\\",\\"color\\":\\"red\\"}"},"hoverEvent":{"action":"show_text","contents":{"text":"Unset","color":"red"}}},\
         {"text":"     "},\
         {"text":"\\u2467","clickEvent":{"action":"run_command","value":"/tellraw @s {\\"text\\":\\"No location set\\",\\"color\\":\\"red\\"}"},"hoverEvent":{"action":"show_text","contents":{"text":"Unset","color":"red"}}},\
         {"text":"     "},\
         {"text":"\\u2468","clickEvent":{"action":"run_command","value":"/tellraw @s {\\"text\\":\\"No location set\\",\\"color\\":\\"red\\"}"},"hoverEvent":{"action":"show_text","contents":{"text":"Unset","color":"red"}}},\
         {"text":"\\n\\n\\n        "},\
         {"text":"Open Map","bold":true,"color":"dark_green","clickEvent":{"action":"run_command","value":"/function taxi:open_map"},"hoverEvent":{"action":"show_text","contents":"Open interactive map"}}\
      ]',\
      '["",\
         {"text":"√ó","bold":true,"clickEvent":{"action":"change_page","value":1},"hoverEvent":{"action":"show_text","contents":"Home Screen"}}," ",\
         {"text":"Objectives:","bold":true,"underlined":true},\
         {"text":"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n"},\
         {"text":"            "},{"text":" ‚Éû","bold":true,"clickEvent":{"action":"change_page","value":1}, "hoverEvent":{"action":"show_text","contents":"Home Screen"}}\
      ]',\
      '["",\
         {"text":"√ó","bold":true,"clickEvent":{"action":"change_page","value":1},"hoverEvent":{"action":"show_text","contents":"Home Screen"}}," ",\
         {"text":"Music:","bold":true,"underlined":true},\
         {"text":"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n"},\
         "     ",\
         {"text":"üîÄ","bold":false,"clickEvent":{"action":"run_command","value":"/execute as @s run function music:shuffle"}, "hoverEvent":{"action":"show_text","contents":"Shuffle"}},"   ",\
         {"text":"‚èÆ","bold":false,"clickEvent":{"action":"run_command","value":"/execute as @s run function music:previous_song with storage music:data"}, "hoverEvent":{"action":"show_text","contents":"Previous"}},"  ",\
         {"text":"‚èØ","bold":false,"clickEvent":{"action":"run_command","value":"/execute as @s run function music:play_pause"}, "hoverEvent":{"action":"show_text","contents":"Play/Pause music"}},"  ",\
         {"text":"‚è≠","bold":false,"clickEvent":{"action":"run_command","value":"/execute as @s run function music:next_song with storage music:data"}, "hoverEvent":{"action":"show_text","contents":"Next"}},"   ",\
         {"text":"üîÅ","bold":false,"clickEvent":{"action":"run_command","value":"/execute as @s run function music:repeat"}, "hoverEvent":{"action":"show_text","contents":"Repeat"}},\
         {"text":"\\n"},\
         {"text":"            "},{"text":" ‚Éû","bold":true,"clickEvent":{"action":"change_page","value":1}, "hoverEvent":{"action":"show_text","contents":"Home Screen"}}\
      ]',\
      '["",\
         {"text":"√ó","bold":true,"clickEvent":{"action":"change_page","value":1},"hoverEvent":{"action":"show_text","contents":"Home Screen"}}," ",\
         {"text":"Settings:","bold":true,"underlined":true},"          ",\
         {"text":"üîÑ","bold":true,"clickEvent":{"action":"run_command","value":"/execute as @s run function phone:update with storage phone:data"},"hoverEvent":{"action":"show_text","contents":"Restart"}},\
         {"text":"\\n\\n"},\
         {"text":"Daytime","bold":true,"color":"aqua","clickEvent":{"action":"run_command","value":"/time set day"}},\
         {"text":"\\n\\n"},\
         {"text":"Night-time","bold":true,"color":"dark_blue","clickEvent":{"action":"run_command","value":"/time set night"}},\
         {"text":"\\n\\n"},\
         {"text":"Night vision","bold":true,"color":"aqua","clickEvent":{"action":"run_command","value":"/effect @p minecraft:night_vision 1000000 255 true"}},\
         {"text":"\\n\\n"},\
         {"text":"Clear effects","bold":true,"color":"gray","clickEvent":{"action":"run_command","value":"/effect @p clear"}},\
         {"text":"\\n\\n\\n\\n\\n"},\
         {"text":"            "},{"text":" ‚Éû","bold":true,"clickEvent":{"action":"change_page","value":1}, "hoverEvent":{"action":"show_text","contents":"Home Screen"}}\
      ]'\
   ],\
   title:"Fone",\
   author:"Prof Frink",\
   display:{Lore:['[{"text":"The Fone 1","italic":false,"color":"gold"},{"text":"","italic":false,"color":"dark_purple"}]','[{"text":"WARNING: Prototype!","italic":false,"color":"red","underlined":true,"bold":true}]']},\
   serial_number:"fone_XXXXXX"\
}

# gets phone location in inventory
data modify storage phone:data storage set value "phone:data"
data remove storage phone:data slot_id
execute if data entity @s Inventory[{tag:{serial_number:"fone_XXXXXX"}}].Slot store result storage phone:data slot_id int 1 run data get entity @s Inventory[{tag:{serial_number:"fone_XXXXXX"}}].Slot 1
function misc:slot_index_to_name with storage phone:data

# set phone serial_number
execute store result storage phone:data serial_number_value int 1 run random value 0..999999 phone
data modify storage phone:data runtime set value 0
execute store result storage phone:data initial_boot_time int 1 run scoreboard players get @s clock

# build the phone
execute as @s run function phone:build with storage phone:data



# {"text":"\\u2460","clickEvent":{"action":"run_command","value":"/execute in minecraft:overworld run tp @s -1069.47 46.50 44.17 180.02 -39.15"},"hoverEvent":{"action":"show_text","contents":"Moe\'s Tavern"}},\
# {"text":"                          "},\

# Ãß_Ãß_Ãß  ‚ïî‚ïê‚ïó
# «Å‚ò≥|‚ò≤«Å  ..«Å‚ë®«Å
# |üöï| \\u2708